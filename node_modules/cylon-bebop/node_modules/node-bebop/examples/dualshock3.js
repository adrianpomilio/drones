var bebop = require('../.');
var gamepad = require('gamepad');

var drone = bebop.createClient();

gamepad.init()

if (gamepad.numDevices() === 0) {
  throw "No joystick detected!";
}

// Create a game loop and poll for events
setInterval(gamepad.processEvents, 16);

// Listen for move events on all gamepads
gamepad.on("move", function (id, axis, value) {
  console.log("move", {
    id: id,
    axis: axis,
    value: value,
  });
});

// Listen for button up events on all gamepads
gamepad.on("up", function (id, num) {
  console.log("up", {
    id: id,
    num: num,
  });
});

drone.connect(function() {
  drone.takeOff();

  setTimeout(function() {
    drone.land();
  }, 5000);
});
